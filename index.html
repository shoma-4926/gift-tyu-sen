<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>シードによる固定ランダム</title>
</head>
<body>
    <h1>固定ランダムな数字 (0〜8) の表示</h1>
    <p id="random-number"></p>
    <input type="text" id="input-box" placeholder="数字を入力">
    <button type="button" onclick="getNextRandomNumber()">クリック</button>
    
    <script>
        // 任意のシード値を設定（このシードを変更すると結果が変わります）
        const SEED = 'test0123';

        // シードを基に乱数を生成するXorshiftアルゴリズム
        function xorshift(seed) {
            let state = 0;
            for (let i = 0; i < seed.length; i++) {
                state = (state << 5) - state + seed.charCodeAt(i);
            }
            return function() {
                state ^= state << 21;
                state ^= state >>> 35;
                state ^= state << 4;
                return (state >>> 0) / 0xFFFFFFFF;
            };
        }

        // 乱数を使って配列をシャッフルする
        function shuffleWithSeed(array, seed) {
            const random = xorshift(seed);
            let shuffledArray = array.slice(); // 配列のコピーを作成
            for (let i = shuffledArray.length - 1; i > 0; i--) {
                let j = Math.floor(random() * (i + 1));
                [shuffledArray[i], shuffledArray[j]] = [shuffledArray[j], shuffledArray[i]];
            }
            return shuffledArray;
        }

        // 0から8までの数字の配列を作成
        const numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8];

        // シードを使ってランダム順に並べる
        const shuffledNumbers = shuffleWithSeed(numbers, SEED);

        // 最初に表示するランダムな数字を決定（順番に表示）
        let currentIndex = 0;

        // 次のランダムな数字を表示する関数
        function getNextRandomNumber() {
            const inputText = document.getElementById('input-box').value;

            // 入力された数字が0〜8の範囲内か確認
            const inputNumber = parseInt(inputText, 10);
            if (isNaN(inputNumber) || inputNumber < 0 || inputNumber > 8) {
                document.getElementById('random-number').textContent = '無効な入力です。0から8の間で入力してください。';
                return;
            }

            // 次のランダムな数字を表示
            const randomNumber = shuffledNumbers[currentIndex];
            document.getElementById('random-number').textContent = `選ばれた数字: ${randomNumber}`;

            // 次の数字に進む
            currentIndex = (currentIndex + 1) % shuffledNumbers.length;
        }
    </script>
</body>
</html>
